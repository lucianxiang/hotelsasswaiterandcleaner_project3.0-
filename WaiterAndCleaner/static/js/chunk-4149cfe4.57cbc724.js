(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4149cfe4"],{2489:function(e,t,a){},9890:function(e,t,a){"use strict";var n=a("2489"),i=a.n(n);i.a},d5a8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",{staticClass:"wrapTitle"},[e._v("酒店后台管理报表")]),a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.formNavIndex,mode:"horizontal"},on:{select:e.changeNav}},e._l(e.formNavList,function(t,n){return a("el-menu-item",{key:n,attrs:{index:t.value}},[e._v(e._s(t.label)+"\n    ")])}),1),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.formNavIndex,expression:"formNavIndex == 0"}],staticClass:"cleanerForm"},[a("el-col",{staticClass:"formSearch",attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("span",[e._v("日期筛选:")])]),a("el-form-item",[a("el-date-picker",{attrs:{size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:e.changeCleanerTime},model:{value:e.cleanerTime,callback:function(t){e.cleanerTime=t},expression:"cleanerTime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchCleanerForm}},[e._v("查询")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.cleanerFormList}},[a("el-table-column",{attrs:{align:"center",prop:"ht_ci_Dealer",label:"工号"}}),a("el-table-column",{attrs:{align:"center",prop:"ht_ci_Name",label:"昵称"}}),a("el-table-column",{attrs:{align:"center",label:"打扫房间数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.roomCleanCount)+" 间\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"ht_ci_Name",label:"昵称"}}),a("el-table-column",{attrs:{align:"center",prop:"ht_ci_Phone",label:"手机号"}}),a("el-table-column",{attrs:{align:"center",prop:"RoomIdArry",label:"房间号"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.formNavIndex,expression:"formNavIndex == 1"}],staticClass:"financeForm"},[a("el-col",{staticClass:"formSearch",attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("span",[e._v("日期筛选:")])]),a("el-form-item",[a("el-date-picker",{attrs:{size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:e.changeFinanceTime},model:{value:e.financeTime,callback:function(t){e.financeTime=t},expression:"financeTime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchFinanceForm}},[e._v("查询")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.financialFormList}},[a("el-table-column",{attrs:{prop:"ht_od_RoomPriceID",align:"center",label:"房间价格ID"}}),a("el-table-column",{attrs:{align:"center",label:"出售价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          ￥"+e._s(t.row.ht_od_SellPrice)+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"ht_rpp_Name",align:"center",label:"房间名称"}}),a("el-table-column",{attrs:{align:"center",label:"入住天数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.roomTypeCount)+" 天\n        ")]}}])})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.formNavIndex,expression:"formNavIndex == 2"}],staticClass:"financeForm"},[a("el-col",{staticClass:"formSearch clearfix",attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("span",[e._v("日期筛选:")])]),a("el-form-item",[a("el-date-picker",{attrs:{size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:e.changeGuestTime},model:{value:e.userTime,callback:function(t){e.userTime=t},expression:"userTime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchGuestForm}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"cashierChart"},[a("p",[e._v("入住率: "+e._s(e.num)+"%")]),a("canvas",{attrs:{id:"canvas",width:"300",height:"300"}},[e._v("\n        您的浏览器不支持canvas\n      ")])]),a("strong",{staticClass:"cashierChartStrong"},[e._v(e._s(e.showTime))])],1)],1)},i=[],r=a("5880"),o={computed:Object(r["mapGetters"])([]),data:function(){return{formNavIndex:"0",formNavList:[{value:"0",label:"清洁员报表"},{value:"1",label:"财务报表"},{value:"2",label:"用户入住率"}],cleanerFromDate:"",cleanerToDate:"",hotelId:"",cleanerTime:"",cleanerTotal:0,cleanerFormList:[],financeTime:"",financeFromDate:"",financeToDate:"",financialFormList:[],userTime:"",guestFormObj:{},guestFromDate:"",guestToDate:"",gusetTime:"",num:0,showTime:""}},created:function(){var e=new Date;this.cleanerFromDate=e.getFullYear()+"-"+this.addZero(e.getMonth()+1)+"-"+this.addZero(e.getDate())+" 00:00:00",this.cleanerToDate=e.getFullYear()+"-"+this.addZero(e.getMonth()+1)+"-"+this.addZero(e.getDate())+" 23:59:59",this.financeFromDate=e.getFullYear()+"-"+this.addZero(e.getMonth()+1)+"-"+this.addZero(e.getDate())+" 00:00:00",this.financeToDate=e.getFullYear()+"-"+this.addZero(e.getMonth()+1)+"-"+this.addZero(e.getDate())+" 23:59:59",this.guestFromDate=e.getFullYear()+"-"+this.addZero(e.getMonth()+1)+"-"+this.addZero(e.getDate())+" 00:00:00",this.guestToDate=e.getFullYear()+"-"+this.addZero(e.getMonth()+1)+"-"+this.addZero(e.getDate())+" 23:59:59",sessionStorage.getItem("hotelID")?this.hotelId=JSON.parse(sessionStorage.getItem("hotelID")):this.$router.push({name:"Login"}),this.initCleanerForm()},methods:{initFinancialStatements:function(){var e=this;this.isLoading=!0;var t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:this.hotelId,fromDate:this.financeFromDate,toDate:this.financeToDate};this.isLoading=!0,this.$store.dispatch("initFinancialStatements",t).then(function(t){e.financialFormList=t.data,e.isLoading=!1},function(t){e.$notify({message:t,type:"error"}),e.isLoading=!1})},addZero:function(e){return e<10?"0"+e:e},changeCleanerTime:function(e){if(this.cleanerFromDate=e+" 00:00:00",this.cleanerToDate=e+" 23:59:59",!e){var t=new Date;this.cleanerFromDate=t.getFullYear()+"-"+this.addZero(t.getMonth()+1)+"-"+this.addZero(t.getDate())+" 00:00:00",this.cleanerToDate=t.getFullYear()+"-"+this.addZero(t.getMonth()+1)+"-"+this.addZero(t.getDate())+" 23:59:59"}},changeFinanceTime:function(e){if(this.financeFromDate=e+" 00:00:00",this.financeToDate=e+" 23:59:59",!e){var t=new Date;this.financeFromDate=t.getFullYear()+"-"+this.addZero(t.getMonth()+1)+"-"+this.addZero(t.getDate())+" 00:00:00",this.financeToDate=t.getFullYear()+"-"+this.addZero(t.getMonth()+1)+"-"+this.addZero(t.getDate())+" 23:59:59"}},changeGuestTime:function(e){if(this.guestFromDate=e+" 00:00:00",this.guestToDate=e+" 23:59:59",!e){var t=new Date;this.guestFromDate=t.getFullYear()+"-"+this.addZero(t.getMonth()+1)+"-"+this.addZero(t.getDate())+" 00:00:00",this.guestToDate=t.getFullYear()+"-"+this.addZero(t.getMonth()+1)+"-"+this.addZero(t.getDate())+" 23:59:59"}},changeNav:function(e){switch(this.formNavIndex=e,e){case"0":this.initCleanerForm();break;case"1":this.initFinancialStatements();break;case"2":this.initGuestForm();break;default:this.$notify({message:"该功能暂未开放",type:"error"})}},initCleanerForm:function(){var e=this;this.isLoading=!0;var t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:this.hotelId,fromDate:this.cleanerFromDate,toDate:this.cleanerToDate};this.$store.dispatch("initHotelCleanerForm",t).then(function(t){e.cleanerFormList=t.data,e.isLoading=!1},function(t){e.$notify({message:t,type:"error"}),e.isLoading=!1})},searchCleanerForm:function(){this.initCleanerForm()},searchFinanceForm:function(){this.initFinancialStatements()},searchGuestForm:function(){this.initGuestForm()},initGuestForm:function(){var e=this,t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:this.hotelId,fromDate:this.guestFromDate,toDate:this.guestToDate};this.isLoading=!0,this.$store.dispatch("initGuestForm",t).then(function(t){e.showTime=e.guestFromDate+" ~ "+e.guestToDate,e.guestFormObj=t.data[0],e.num=t.data.length?Math.round(e.guestFormObj.inCount/e.guestFormObj.roomCount*100):0,e.$nextTick(function(){e.initCanvas()})},function(t){e.$notify({message:t,type:"error"})})},initCanvas:function(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.beginPath(),t.lineWidth=30,t.strokeStyle="#ccc",t.arc(150,150,120,0,2*Math.PI),t.stroke(),t.beginPath(),t.lineWidth=30,t.strokeStyle="#f00",t.arc(150,150,120,0,this.num/50*Math.PI),t.stroke()}}},s=o,l=(a("9890"),a("2877")),c=Object(l["a"])(s,n,i,!1,null,"62e1782f",null);t["default"]=c.exports}}]);