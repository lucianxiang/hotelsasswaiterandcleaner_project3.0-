(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6496ec10"],{"0a0d":function(e,t,o){e.exports=o("e829")},"2f37":function(e,t,o){var i=o("63b6");i(i.S,"Date",{now:function(){return(new Date).getTime()}})},"3b8d":function(e,t,o){"use strict";o.d(t,"a",function(){return r});var i=o("795b"),n=o.n(i);function s(e,t,o,i,s,r,a){try{var l=e[r](a),c=l.value}catch(d){return void o(d)}l.done?t(c):n.a.resolve(c).then(i,s)}function r(e){return function(){var t=this,o=arguments;return new n.a(function(i,n){var r=e.apply(t,o);function a(e){s(r,i,n,a,l,"next",e)}function l(e){s(r,i,n,a,l,"throw",e)}a(void 0)})}}},"7f7f":function(e,t,o){var i=o("86cc").f,n=Function.prototype,s=/^\s*function ([^ (]*)/,r="name";r in n||o("9e1e")&&i(n,r,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},"8de3":function(e,t,o){"use strict";var i=o("91db"),n=o.n(i);n.a},"91db":function(e,t,o){},"96cf":function(e,t){!function(t){"use strict";var o,i=Object.prototype,n=i.hasOwnProperty,s="function"===typeof Symbol?Symbol:{},r=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag",c="object"===typeof e,d=t.regeneratorRuntime;if(d)c&&(e.exports=d);else{d=t.regeneratorRuntime=c?e.exports:{},d.wrap=I;var h="suspendedStart",u="suspendedYield",m="executing",p="completed",f={},v={};v[r]=function(){return this};var _=Object.getPrototypeOf,g=_&&_(_(P([])));g&&g!==i&&n.call(g,r)&&(v=g);var y=O.prototype=w.prototype=Object.create(v);b.prototype=y.constructor=O,O.constructor=b,O[l]=b.displayName="GeneratorFunction",d.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},d.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(y),e},d.awrap=function(e){return{__await:e}},C(k.prototype),k.prototype[a]=function(){return this},d.AsyncIterator=k,d.async=function(e,t,o,i){var n=new k(I(e,t,o,i));return d.isGeneratorFunction(t)?n:n.next().then(function(e){return e.done?e.value:n.next()})},C(y),y[l]="Generator",y[r]=function(){return this},y.toString=function(){return"[object Generator]"},d.keys=function(e){var t=[];for(var o in e)t.push(o);return t.reverse(),function o(){while(t.length){var i=t.pop();if(i in e)return o.value=i,o.done=!1,o}return o.done=!0,o}},d.values=P,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=o)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,n){return a.type="throw",a.arg=e,t.next=i,n&&(t.method="next",t.arg=o),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s],a=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=n.call(r,"catchLoc"),c=n.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var r=s?s.completion:{};return r.type=e,r.arg=t,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),x(o),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var i=o.completion;if("throw"===i.type){var n=i.arg;x(o)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:P(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=o),f}}}function I(e,t,o,i){var n=t&&t.prototype instanceof w?t:w,s=Object.create(n.prototype),r=new S(i||[]);return s._invoke=D(e,o,r),s}function L(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(i){return{type:"throw",arg:i}}}function w(){}function b(){}function O(){}function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function k(e){function t(o,i,s,r){var a=L(e[o],e,i);if("throw"!==a.type){var l=a.arg,c=l.value;return c&&"object"===typeof c&&n.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,s,r)},function(e){t("throw",e,s,r)}):Promise.resolve(c).then(function(e){l.value=e,s(l)},function(e){return t("throw",e,s,r)})}r(a.arg)}var o;function i(e,i){function n(){return new Promise(function(o,n){t(e,i,o,n)})}return o=o?o.then(n,n):n()}this._invoke=i}function D(e,t,o){var i=h;return function(n,s){if(i===m)throw new Error("Generator is already running");if(i===p){if("throw"===n)throw s;return $()}o.method=n,o.arg=s;while(1){var r=o.delegate;if(r){var a=R(r,o);if(a){if(a===f)continue;return a}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(i===h)throw i=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i=m;var l=L(e,t,o);if("normal"===l.type){if(i=o.done?p:u,l.arg===f)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(i=p,o.method="throw",o.arg=l.arg)}}}function R(e,t){var i=e.iterator[t.method];if(i===o){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=o,R(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=L(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var s=n.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=o),t.delegate=null,f):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function t(){while(++i<e.length)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=o,t.done=!0,t};return s.next=s}}return{next:$}}function $(){return{value:o,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},e1bf:function(e,t,o){"use strict";o.d(t,"b",function(){return r}),o.d(t,"a",function(){return a});var i=o("f499"),n=o.n(i),s={get:function(e,t){var o=new XMLHttpRequest;o.open("GET",e,!0),o.onreadystatechange=function(){(4==o.readyState&&200==o.status||304==o.status)&&t.call(this,o.responseText)},o.send()},post:function(e,t,o){var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4!=i.readyState||200!=i.status&&304!=i.status||o.call(this,i.responseText)},i.send(t)}},r=function(e,t){s.post("http://127.0.0.1:18008",n()({action:"GetCarIdInfo",MaxSecord:e}),function(e){var o=JSON.parse(e);1*o.resultcode==200||o.resultcode,t(o)})},a=function(e){s.post("http://127.0.0.1:18008",n()({action:"CancelRead"}),function(t){var o=JSON.parse(t);1*o.resultcode==200||1*o.resultcode==100?e&&null!=e&&e(o):console.log(t)})}},e5f8:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"wrap"},[o("div",{staticClass:"leftRoom clearfix"},[o("div",{staticClass:"leftRoomCondition clearfix"},[o("div",[o("strong",[e._v("客源:")]),o("el-checkbox-group",{on:{change:e.changeSourceList},model:{value:e.options.orderFrom,callback:function(t){e.$set(e.options,"orderFrom",t)},expression:"options.orderFrom"}},e._l(e.sourceList,function(t,i){return o("el-checkbox",{key:i,attrs:{label:t.wayID}},[e._v("\n              "+e._s(t.wayName)+"("+e._s(t.bookFromCount)+")\n            ")])}),1)],1),o("div",[o("strong",[e._v("订单类型:")]),o("el-checkbox-group",{on:{change:e.changeSourceList},model:{value:e.options.custFrom,callback:function(t){e.$set(e.options,"custFrom",t)},expression:"options.custFrom"}},e._l(e.custFromList,function(t,i){return o("el-checkbox",{key:i,attrs:{label:t.memberID}},[e._v("\n              "+e._s(t.memberName)+"("+e._s(t.fromCount)+")\n            ")])}),1)],1)]),o("div",{staticClass:"hotelRoomListWrap"},[e._l(e.floorConditionList,function(t,i){return o("div",{staticClass:"hotelRoomList"},[o("strong",[e._v(e._s(t.Level))]),o("ul",{staticClass:"floorRoom clearfix"},e._l(t.RoomList,function(i,n){return o("li",{class:{active:n==e.roomIndex&&t.Level==e.floorLevel},on:{click:function(o){o.stopPropagation(),e.changeRoom(i,n,t.Level)}}},[o("div",{staticClass:"thisRoomState",class:[{havePersonal:2==i.ht_re_State||3==i.ht_re_State},{emptyPersonal:0==i.ht_re_State},{repairPersonal:4==i.ht_re_State},{cleanerPersonal:(1==i.ht_re_State||3==i.ht_re_State)&&i.ht_re_NeedClean},{lockPersonal:i.ht_re_LockState}]},[o("strong",[e._v(e._s(i.ht_re_RoomID)+e._s(i.roomTypeName))]),o("div",{directives:[{name:"show",rawName:"v-show",value:2==i.ht_re_State||3==i.ht_re_State,expression:"ite.ht_re_State == 2 || ite.ht_re_State == 3"}],staticClass:"haveUserRoom"},[o("span",{staticClass:"guestName"},[e._v(e._s(i.bookName))]),o("i",{staticClass:"userIcon"}),o("i",{directives:[{name:"show",rawName:"v-show",value:i.ht_re_NeedClean,expression:"ite.ht_re_NeedClean"}],staticClass:"haveCleanerIcon"})]),o("span",{directives:[{name:"show",rawName:"v-show",value:0==i.ht_re_State&&!i.ht_re_NeedClean&&!i.ht_re_LockState,expression:"ite.ht_re_State == 0 && !ite.ht_re_NeedClean && !ite.ht_re_LockState "}],staticClass:"emptyRoom"},[e._v("空")]),o("i",{directives:[{name:"show",rawName:"v-show",value:!i.ht_re_NeedClean&&4==i.ht_re_State,expression:"!ite.ht_re_NeedClean && ite.ht_re_State == 4"}],staticClass:"repairIcon"}),o("i",{directives:[{name:"show",rawName:"v-show",value:(1==i.ht_re_State||3==i.ht_re_State)&&i.ht_re_NeedClean,expression:"(ite.ht_re_State == 1 || ite.ht_re_State == 3) && ite.ht_re_NeedClean"}],staticClass:"cleanerIcon"}),o("i",{directives:[{name:"show",rawName:"v-show",value:!i.ht_re_NeedClean&&1==i.ht_re_LockState&&0==i.ht_re_State,expression:"!ite.ht_re_NeedClean && ite.ht_re_LockState == 1 && ite.ht_re_State == 0"}],staticClass:"lockIcon"})]),o("div",{directives:[{name:"show",rawName:"v-show",value:n==e.roomIndex&&t.Level==e.floorLevel&&(0==i.ht_re_State||4==i.ht_re_State||1==i.ht_re_State),expression:"\n                   i == roomIndex &&\n                   item.Level == floorLevel &&\n                   (ite.ht_re_State == 0 || ite.ht_re_State == 4 || ite.ht_re_State == 1)"}],staticClass:"noUserOperation",on:{click:function(t){return t.stopPropagation(),e.clickWhite(t)}}},[o("i",{on:{click:function(t){return t.stopPropagation(),e.closeRoomOperation(t)}}}),o("strong",[e._v(e._s(i.ht_re_RoomID)+e._s(i.roomTypeName))]),o("div",{staticClass:"clearfix"},[o("a",{directives:[{name:"show",rawName:"v-show",value:!i.ht_re_NeedClean&&0==i.ht_re_LockState&&4!=i.ht_re_State,expression:"!ite.ht_re_NeedClean && ite.ht_re_LockState == 0 &&\n                     ite.ht_re_State != 4"}],attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.openCheckIn(i)}}},[e._v("入 住")]),o("a",{directives:[{name:"show",rawName:"v-show",value:!i.ht_re_NeedClean&&0==i.ht_re_LockState&&(0==i.ht_re_State||1==i.ht_re_State)&&4!=i.ht_re_State,expression:"!ite.ht_re_NeedClean && ite.ht_re_LockState == 0 &&\n                     (ite.ht_re_State == 0||ite.ht_re_State == 1) &&\n                      ite.ht_re_State != 4"}],attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.hotelLockRoom(i)}}},[e._v("锁 房")]),o("a",{directives:[{name:"show",rawName:"v-show",value:!i.ht_re_NeedClean&&1==i.ht_re_LockState&&(0==i.ht_re_State||1==i.ht_re_State)&&4!=i.ht_re_State,expression:"!ite.ht_re_NeedClean && ite.ht_re_LockState == 1 &&\n                      (ite.ht_re_State == 0||ite.ht_re_State == 1) &&\n                       ite.ht_re_State != 4"}],attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.hotelLockRoom(i)}}},[e._v("取消锁房")]),o("a",{directives:[{name:"show",rawName:"v-show",value:!i.ht_re_NeedClean&&4!=i.ht_re_State&&(0==i.ht_re_LockState||2==i.ht_re_LockState),expression:"!ite.ht_re_NeedClean && ite.ht_re_State != 4 &&\n                  (ite.ht_re_LockState ==  0 || ite.ht_re_LockState == 2) "}],attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.updateDirtyRoom(i,0)}}},[e._v("脏 房")]),o("a",{directives:[{name:"show",rawName:"v-show",value:!i.ht_re_NeedClean&&1!=i.ht_re_LockState&&4!=i.ht_re_State,expression:"!ite.ht_re_NeedClean && ite.ht_re_LockState != 1 &&\n                   ite.ht_re_State != 4"}],attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.updateDirtyRoom(i,1)}}},[e._v("维 修")]),o("a",{directives:[{name:"show",rawName:"v-show",value:!i.ht_re_NeedClean&&4==i.ht_re_State,expression:"!ite.ht_re_NeedClean && ite.ht_re_State == 4"}],attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.roomOperationOver(i,1)}}},[e._v("维修完成")]),o("a",{directives:[{name:"show",rawName:"v-show",value:i.ht_re_NeedClean,expression:"ite.ht_re_NeedClean"}],attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.roomOperationOver(i,0)}}},[e._v("打扫完成")])])]),o("div",{directives:[{name:"show",rawName:"v-show",value:n==e.roomIndex&&t.Level==e.floorLevel&&(2==i.ht_re_State||3==i.ht_re_State),expression:"\n                   i == roomIndex &&\n                   item.Level == floorLevel &&\n                   (ite.ht_re_State == 2 || ite.ht_re_State == 3)"}],staticClass:"haveUserOperation",on:{click:function(t){return t.stopPropagation(),e.clickWhite(t)}}},[o("i",{on:{click:function(t){return t.stopPropagation(),e.closeRoomOperation(t)}}}),o("strong",[e._v(e._s(i.ht_re_RoomID)+e._s(i.roomTypeName))]),o("div",{staticClass:"haveUserOperationNav clearfix"},e._l(e.haveUserOperation,function(n,s){return o("a",{class:{active:s==e.roomStateIndex},attrs:{href:"javascript:;"},on:{click:function(o){o.stopPropagation(),e.changeRoomState(i,s,t.Level)}}},[e._v(e._s(n.label))])}),0),o("div",{directives:[{name:"show",rawName:"v-show",value:0==e.roomStateIndex,expression:"roomStateIndex == 0"}],staticClass:"roomUserInfo"},[o("div",{staticClass:"roomUserInfoCon clearfix"},[o("img",{attrs:{src:"http://hly.1000da.com.cn/assets/hotelsasswaiterandcleaner_project/img/HotelBackstage/userIcon.png",alt:""}}),o("div",{staticClass:"clearfix"},[o("span",{staticClass:"time"},[e._v("入/离时间: "+e._s(e.userOrderInfo.inTime)+" - "+e._s(e.userOrderInfo.outTime))]),o("span",[e._v("天数: "+e._s(e.userOrderInfo.Days)+"天")]),o("span",[e._v("房价: ￥"+e._s(e.userOrderInfo.ht_re_RoomTypePrice))])])]),o("div",{staticClass:"roomUserInfoOperation clearfix"},[o("a",{directives:[{name:"show",rawName:"v-show",value:!i.ht_re_NeedClean,expression:"!ite.ht_re_NeedClean"}],attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.updateDirtyRoom(i,0)}}},[e._v("脏 房")]),o("a",{directives:[{name:"show",rawName:"v-show",value:i.ht_re_NeedClean,expression:"ite.ht_re_NeedClean"}],attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.roomOperationOver(i,0)}}},[e._v("打扫完成")]),o("a",{attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.initUserOrder(i)}}},[e._v("查询详情")])])]),o("ul",{directives:[{name:"show",rawName:"v-show",value:1==e.roomStateIndex,expression:"roomStateIndex == 1"}],staticClass:"roomState clearfix"},e._l(e.longRoomStateList,function(t,i){return o("li",[o("strong",[e._v(e._s(t.month)+"/"+e._s(t.day))]),o("span",[e._v(e._s(t.planState))])])}),0)])])}),0)])}),o("p",{directives:[{name:"show",rawName:"v-show",value:!e.floorConditionList.length,expression:"!floorConditionList.length"}]},[e._v("暂无数据")])],2)]),o("div",{staticClass:"rightQueryCondition"},[o("strong",[e._v("营业实况/房间检索")]),o("div",{staticClass:"searchRoomState"},[o("strong",[e._v("房间状态")]),o("el-checkbox-group",{on:{change:e.changeSourceList},model:{value:e.options.roomState,callback:function(t){e.$set(e.options,"roomState",t)},expression:"options.roomState"}},e._l(e.conditionList,function(t,i){return o("el-checkbox",{key:i,attrs:{label:t.roomStateID}},[e._v("\n            "+e._s(t.roomStateName)+"("+e._s(t.stateCount)+")\n          ")])}),1)],1),o("div",{staticClass:"searchRoomType"},[e._m(0),o("ul",{staticClass:"tungFloorList clearfix"},e._l(e.hotelToungList,function(t,i){return o("li",{class:{active:i==e.tungIndex},on:{click:function(o){o.stopPropagation(),e.changeTung(t,i)}}},[e._v("\n            "+e._s(t.BuildNo)+"栋("+e._s(t.BuildRoomCount)+"/"+e._s(t.BuildRoomCount-t.BuildPersonCount)+")\n          ")])}),0)]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.floorConditionList.length,expression:"floorConditionList.length"}],staticClass:"searchRoomType"},[e._m(1),o("ul",{staticClass:"tungFloorList clearfix"},e._l(e.floorCondition,function(t,i){return o("li",{class:{active:i==e.floorIndex},on:{click:function(o){o.stopPropagation(),e.changeFloor(t,i)}}},[e._v("\n            "+e._s(t.Level)+"层("+e._s(t.LevelRoomCount)+"/"+e._s(t.LevelRoomCount-t.LevelUseCount)+")\n          ")])}),0)])]),o("footer",[o("div",{staticClass:"roomData"},[o("div",{staticClass:"allRoom"},[o("strong",[e._v("全部("+e._s(e.searchConditionObj.totalRows)+")")])]),o("div",{staticClass:"hotelEmptyRoom"},[o("i"),o("strong",[e._v("空房("+e._s(e.searchConditionObj.emptyRoomCount)+")")])]),o("div",{staticClass:"havePeRoom"},[o("i"),o("strong",[e._v("住人("+e._s(e.searchConditionObj.personRoomCount)+")")])]),o("div",{staticClass:"repairRoom"},[o("i"),o("strong",[e._v("维修("+e._s(e.searchConditionObj.mendRoomCount)+")")])]),o("div",{staticClass:"nowOccupancyRate"},[e._v("\n          当前入住率: "+e._s(Math.floor(100*e.searchConditionObj.inFate?100*e.searchConditionObj.inFate:0))+"%\n        ")])])])]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.showFillInInfo,expression:"showFillInInfo"}],staticClass:"checkInWindow",on:{click:function(t){return t.stopPropagation(),e.closeCheckIn(t)}}},[o("div",{staticClass:"checkInWindowBox",on:{click:function(t){return t.stopPropagation(),e.clickWhite(t)}}},[o("div",{staticClass:"checkIntitle"},[o("strong",[e._v("入住")]),o("i",{on:{click:function(t){return t.stopPropagation(),e.closeCheckIn(t)}}})]),o("div",{staticClass:"personalCheckIn"},[o("div",{staticClass:"personalInfo clearfix"},[o("img",{attrs:{src:"http://hly.1000da.com.cn/assets/hotelsasswaiterandcleaner_project/img/HotelBackstage/userIcon.png",alt:""}}),o("el-form",{ref:"newRuleForm0",staticClass:"demo-ruleForm",attrs:{inline:!0,model:e.addOrderOptions,rules:e.rules0}},[o("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"姓名",size:"small"},on:{blur:e.setMainPersonInfoName},model:{value:e.addOrderOptions.name,callback:function(t){e.$set(e.addOrderOptions,"name",t)},expression:"addOrderOptions.name"}})],1),o("el-form-item",{attrs:{label:"身份证号:",prop:"idcard"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"身份证号",size:"small"},on:{blur:e.setMainPersonInfoIdcard},model:{value:e.addOrderOptions.idcard,callback:function(t){e.$set(e.addOrderOptions,"idcard",t)},expression:"addOrderOptions.idcard"}})],1),o("el-form-item",{attrs:{label:"手机号:",prop:"phone"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"手机号",size:"small"},on:{blur:e.setMainPersonInfoPhone},model:{value:e.addOrderOptions.phone,callback:function(t){e.$set(e.addOrderOptions,"phone",t)},expression:"addOrderOptions.phone"}})],1),o("el-form-item",{attrs:{label:"入住类型:",required:""}},[o("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.changeOrderType},model:{value:e.addOrderOptions.orderType,callback:function(t){e.$set(e.addOrderOptions,"orderType",t)},expression:"addOrderOptions.orderType"}},e._l(e.orderType,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showVIP,expression:"showVIP"}],attrs:{label:"会员卡号:",required:""}},[o("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.addOrderOptions.cardNo,callback:function(t){e.$set(e.addOrderOptions,"cardNo",t)},expression:"addOrderOptions.cardNo"}})],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showCompany,expression:"showCompany"}],attrs:{label:"选择合作企业:"}},[o("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.addOrderOptions.companyID,callback:function(t){e.$set(e.addOrderOptions,"companyID",t)},expression:"addOrderOptions.companyID"}},e._l(e.companyList,function(e){return o("el-option",{key:e.ht_ui_ID,attrs:{label:e.ht_ui_Name,value:e.ht_ui_ID}})}),1)],1),o("el-form-item",{attrs:{label:"停车位个数:"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",type:"number",min:0},model:{value:e.addOrderOptions.carSeats,callback:function(t){e.$set(e.addOrderOptions,"carSeats",t)},expression:"addOrderOptions.carSeats"}})],1),o("el-form-item",{attrs:{label:"特殊需求:"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.addOrderOptions.specialNeed,callback:function(t){e.$set(e.addOrderOptions,"specialNeed",t)},expression:"addOrderOptions.specialNeed"}})],1),o("el-form-item",{attrs:{label:"选择入离时间:",required:""}},[o("el-date-picker",{attrs:{size:"mini",type:"daterange","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.selectDate},model:{value:e.inOutDate,callback:function(t){e.inOutDate=t},expression:"inOutDate"}})],1),o("el-form-item",[o("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){return t.stopPropagation(),e.clearGuestData(t)}}},[e._v("清除客人资料")])],1)],1)],1),o("div",{staticClass:"personalCheckInOrder"},[o("strong",[e._v("订单信息")]),o("div",{staticClass:"addRoomBtn"},[o("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){return t.stopPropagation(),e.checkInSelectRoom(t)}}},[e._v("添加房间\n            ")])],1),e._l(e.addInRoomList,function(t,i){return o("el-form",{key:i,staticClass:"demo-ruleForm",attrs:{inline:!0,model:e.addOrderOptions}},[o("p",{staticClass:"clearfix"},[e._v(e._s(t.roomID)+" :\n              "),o("span",{staticStyle:{float:"right",cursor:"pointer",color:"#e6a23c",padding:"5px 10px",border:"1px solid #e6a23c","-webkit-border-radius":"5px","-moz-border-radius":"5px","border-radius":"5px"},on:{click:function(o){o.stopPropagation(),e.cancelInPeople(t)}}},[e._v("取消")]),o("span",{staticClass:"readCard",on:{click:function(o){o.stopPropagation(),e.getOtherIdCardInfo(t.mainPersonInfo)}}},[e._v("识别身份证")])]),o("el-form-item",{attrs:{label:"住户姓名:"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.mainPersonInfo.name,callback:function(o){e.$set(t.mainPersonInfo,"name",o)},expression:"item.mainPersonInfo.name"}})],1),o("el-form-item",{attrs:{label:"身份证号:"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.mainPersonInfo.idcard,callback:function(o){e.$set(t.mainPersonInfo,"idcard",o)},expression:"item.mainPersonInfo.idcard"}})],1),o("el-form-item",{attrs:{label:"手机号码:"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.mainPersonInfo.phone,callback:function(o){e.$set(t.mainPersonInfo,"phone",o)},expression:"item.mainPersonInfo.phone"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(o){o.stopPropagation(),e.addOtherPerson(t,i)}}},[e._v("\n                添加同来人\n              ")]),e._l(t.otherPersonInfo,function(i,n){return o("el-form",{key:n,ref:"newRuleForm1",refInFor:!0,staticClass:"demo-ruleForm",attrs:{inline:!0,model:i,rules:e.rules1}},[o("p",{staticClass:"clearfix"},[e._v("同来人信息"+e._s(n+1)+":\n                  "),o("span",{staticStyle:{float:"right",cursor:"pointer",color:"#e6a23c",padding:"5px 10px",font:"14px/1 '微软雅黑'",border:"1px solid #e6a23c","-webkit-border-radius":"5px","-moz-border-radius":"5px","border-radius":"5px"},on:{click:function(o){o.stopPropagation(),e.cancelInOtherPeople(t,n)}}},[e._v("取消")]),o("span",{staticClass:"readCard",on:{click:function(t){t.stopPropagation(),e.getOtherIdCardInfo(i)}}},[e._v("识别身份证")])]),o("el-form-item",{attrs:{label:"同来人姓名:",prop:"name"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:i.name,callback:function(t){e.$set(i,"name",t)},expression:"ite.name"}})],1),o("el-form-item",{attrs:{label:"同来人身份证号:",prop:"idcard"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:i.idcard,callback:function(t){e.$set(i,"idcard",t)},expression:"ite.idcard"}})],1),o("el-form-item",{attrs:{label:"同来人手机号码:",prop:"phone"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:i.phone,callback:function(t){e.$set(i,"phone",t)},expression:"ite.phone"}})],1)],1)})],2)],1)})],2),o("div",{staticClass:"addOrderConfirm"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){t.stopPropagation(),e.showFillInInfo=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return t.stopPropagation(),e.addOrderConfirm(t)}}},[e._v("确 定")])],1)])])]),o("el-dialog",{attrs:{title:e.conRoom+"续住",visible:e.continuedResidenceDialog,"modal-append-to-body":!1,width:"500px"},on:{"update:visible":function(t){e.continuedResidenceDialog=t}}},[o("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",type:"number",min:1,placeholder:"请输入续住天数"},model:{value:e.dayNum,callback:function(t){e.dayNum=t},expression:"dayNum"}}),e._v("\n    天\n    "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){t.stopPropagation(),e.continuedResidenceDialog=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return t.stopPropagation(),e.continuedResidenceSubmit(t)}}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"锁房",visible:e.lockRoomDialog,"modal-append-to-body":!1,width:"700px"},on:{"update:visible":function(t){e.lockRoomDialog=t}}},[o("span",{staticStyle:{"margin-right":"10px","font-size":"14px","line-height":"32px"}},[e._v("备注:")]),o("el-input",{staticStyle:{width:"600px"},attrs:{size:"small",placeholder:"备注"},model:{value:e.lockRemark,callback:function(t){e.lockRemark=t},expression:"lockRemark"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){t.stopPropagation(),e.lockRoomDialog=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return t.stopPropagation(),e.hotelLockRoomConfirm(t)}}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"选房",visible:e.selectRoomDialog,"modal-append-to-body":!1,width:"1000px"},on:{"update:visible":function(t){e.selectRoomDialog=t}}},[o("div",{staticClass:"selectRoomListWrap"},[o("strong",[e._v("当前为"+e._s(e.tungNum)+"栋")]),e._l(e.selectInRoomList,function(t,i){return o("dl",{directives:[{name:"show",rawName:"v-show",value:t.RoomList.length,expression:"item.RoomList.length"}],staticClass:"selectRoomList clearfix"},[o("dt",[e._v(e._s(t.Level))]),e._l(t.RoomList,function(t,i){return o("dd",{class:{active:t.isState},on:{click:function(o){o.stopPropagation(),e.changeInRoom(t,i)}}},[e._v(e._s(t.ht_re_RoomID)+"\n        ")])})],2)})],2),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){t.stopPropagation(),e.selectRoomDialog=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return t.stopPropagation(),e.checkInSelectRoomSumit(t)}}},[e._v("确 定")])],1)]),o("el-dialog",{attrs:{title:"原因",visible:e.showDirtyOrClearnReason,"modal-append-to-body":!1,width:"700px"},on:{"update:visible":function(t){e.showDirtyOrClearnReason=t}}},[o("span",{staticStyle:{"margin-right":"10px","font-size":"14px","line-height":"32px"}},[e._v("原因:")]),o("el-input",{staticStyle:{width:"600px"},attrs:{size:"small",placeholder:"原因"},model:{value:e.dirtyOrClearnReason,callback:function(t){e.dirtyOrClearnReason=t},expression:"dirtyOrClearnReason"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){t.stopPropagation(),e.showDirtyOrClearnReason=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return t.stopPropagation(),e.updateDirtyRoomSubmit(t)}}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:e.conRoom+"账单",visible:e.showBillDetails,"modal-append-to-body":!1,width:"1200px"},on:{"update:visible":function(t){e.showBillDetails=t}}},[o("div",{staticClass:"billDetails clearfix"},[o("div",{staticClass:"bill"},[o("div",{staticClass:"billInfo clearfix"},[o("img",{attrs:{src:"http://hly.1000da.com.cn/assets/hotelsasswaiterandcleaner_project/img/HotelBackstage/userIcon.png",alt:""}}),o("ul",{staticClass:"billInfoCon"},[o("li",{staticClass:"clearfix"},[o("strong",[e._v("房间号:")]),o("div",[o("span",[e._v(e._s(e.guestBillObj.ht_re_RoomID))])])]),o("li",{staticClass:"clearfix"},[o("strong",[e._v("入住天数:")]),o("div",[o("span",[e._v(e._s(e.guestBillObj.Days)+"天")])])]),o("li",{staticClass:"clearfix"},[o("strong",[e._v("入住人:")]),o("div",[o("span",[e._v(e._s(e.guestBillObj.ht_re_Name))])])]),o("li",{staticClass:"clearfix"},[o("strong",[e._v("房间名称:")]),o("div",[o("span",[e._v(e._s(e.guestBillObj.ht_re_RoomTypeName))])])]),o("li",{staticClass:"clearfix"},[o("strong",[e._v("房间价格:")]),o("div",[o("span",[e._v("￥"+e._s(e.guestBillObj.ht_od_SellPrice))])])]),o("li",{staticClass:"clearfix"},[o("strong",[e._v("订单类型:")]),o("div",[o("span",[e._v(e._s(e.guestBillObj.orderTypeName))])])]),o("li",{staticClass:"clearfix"},[o("strong",[e._v("订单号:")]),o("div",[o("span",[e._v(e._s(e.guestBillObj.ht_or_OrderID))])])]),o("li",{staticClass:"clearfix"},[o("strong",[e._v("入离时间:")]),o("div",[o("span",[e._v(e._s(e.guestBillObj.inDate)+" - "+e._s(e.guestBillObj.outDate))])])])])]),o("dl",{staticClass:"connectingRoom"},[o("dt",{staticClass:"clearfix"},[o("strong",[e._v("房号")]),o("span",[e._v("姓名")]),o("em",[e._v("入住时间")])]),e._l(e.guestBillObj.whereList,function(t,i){return o("dd",{key:i,staticClass:"clearfix"},[o("strong",[e._v(e._s(t.ht_od_RoomID))]),o("span",[e._v(e._s(t.ht_od_UserName))]),o("em",[e._v(e._s(t.ht_od_CreateTime))]),t.otherList.length?o("dl",{staticClass:"billInfoList"},[o("dt",[e._v("同来人信息")]),e._l(t.otherList,function(t,i){return o("dd",{key:i,staticClass:"clearfix"},[o("strong",[e._v(e._s(t.ht_op_Name))]),o("span",[e._v(e._s(t.ht_op_Idcard))])])})],2):e._e()])})],2)]),o("div",{staticClass:"roomDetails"},[o("div",{staticClass:"aboutRoomMoney"},[o("strong",[e._v("支付信息:")]),o("div",{staticClass:"clearfix"},[o("strong",[e._v("合计消费: ￥"+e._s(e.guestBillObj.payData?e.guestBillObj.payData.ht_or_SumPrice:""))]),o("span",[e._v("已支付: ￥"+e._s(e.guestBillObj.payData?e.guestBillObj.payData.frontPayMoney:""))])])]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.guestBillObj.dataList}},[o("el-table-column",{attrs:{prop:"ht_od_GoodsListName",label:"房间名称"}}),o("el-table-column",{attrs:{prop:"ht_od_OutDate",width:"200",label:"离店日期"}}),o("el-table-column",{attrs:{prop:"balanceState",label:"状态"}}),o("el-table-column",{attrs:{prop:"ht_od_SellPrice",label:"价格"}}),o("el-table-column",{attrs:{prop:"ht_od_RoomID",label:"房号"}})],1)],1)]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"info",size:"small"},on:{click:function(t){return t.stopPropagation(),e.cancelOrder(t)}}},[e._v("退 单")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return t.stopPropagation(),e.continuedResidence(t)}}},[e._v("续 住")]),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.guestBillObj.payData&&!e.guestBillObj.payData.frontPayMoney&&e.guestBillObj.ht_or_OrderType,expression:"guestBillObj.payData && !guestBillObj.payData.frontPayMoney && guestBillObj.ht_or_OrderType"}],attrs:{type:"danger",size:"small"},on:{click:function(t){return t.stopPropagation(),e.initSearchDeposit(t)}}},[e._v("支付押金")]),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return t.stopPropagation(),e.settleAccounts(t)}}},[e._v("结 账")]),o("el-button",{attrs:{size:"small"},on:{click:function(t){t.stopPropagation(),e.showBillDetails=!1}}},[e._v("取 消")])],1)]),o("el-dialog",{attrs:{title:(e.isState?"结账":"押金")+"支付",visible:e.showHandOverDeposit,"modal-append-to-body":!1,width:"700px"},on:{"update:visible":function(t){e.showHandOverDeposit=t}}},[o("div",{staticClass:"changePayWay"},[o("el-radio-group",{model:{value:e.payWayId,callback:function(t){e.payWayId=t},expression:"payWayId"}},e._l(e.payWayList,function(t,i){return o("el-radio",{key:i,attrs:{label:t.payID}},[e._v(e._s(t.payName))])}),1)],1),o("el-form",{ref:"form",attrs:{"label-width":"100px"}},[o("el-form-item",{attrs:{label:"订单号:"}},[o("p",[e._v(e._s(e.orderId))])]),o("el-form-item",{attrs:{label:"支付金额:"}},[o("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",min:0,size:"small",disabled:e.isState},model:{value:e.depositNum,callback:function(t){e.depositNum=t},expression:"depositNum"}})],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.payWayId,expression:"payWayId == 2"}],attrs:{label:"会员卡密码:"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{type:"password",size:"small",placeholder:"请输入会员卡密码"},model:{value:e.vipPassword,callback:function(t){e.vipPassword=t},expression:"vipPassword"}}),o("el-button",{attrs:{size:"small"},on:{click:function(t){return t.stopPropagation(),e.handOverDeposit(t)}}},[e._v("确 定")])],1)],1),o("div"),o("div",{directives:[{name:"show",rawName:"v-show",value:0==e.payWayId,expression:"payWayId == 0"}],staticClass:"cashPay"},[o("el-button",{attrs:{size:"small",type:"password"},on:{click:function(t){return t.stopPropagation(),e.handOverDeposit(t)}}},[e._v("确认收钱")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:1==e.payWayId,expression:"payWayId == 1"}],staticClass:"cashPay"},[o("el-button",{attrs:{size:"small",type:"password"},on:{click:function(t){return t.stopPropagation(),e.handOverDeposit(t)}}},[e._v("确认收钱")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:3==e.payWayId,expression:"payWayId == 3"}],staticClass:"cashPay"},[o("el-button",{attrs:{size:"small",type:"password"},on:{click:function(t){return t.stopPropagation(),e.handOverDeposit(t)}}},[e._v("确认收钱")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:4==e.payWayId,expression:"payWayId == 4"}],staticClass:"cashPay"},[o("el-button",{attrs:{size:"small",type:"password"},on:{click:function(t){return t.stopPropagation(),e.handOverDeposit(t)}}},[e._v("确认收钱")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:5==e.payWayId,expression:"payWayId == 5"}],staticClass:"toSettleAccounts"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return t.stopPropagation(),e.handOverDeposit(t)}}},[e._v("确认挂账")])],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){t.stopPropagation(),e.showHandOverDeposit=!1}}},[e._v("取 消")])],1)],1),o("el-dialog",{attrs:{title:"退款",visible:e.showRefundType,"modal-append-to-body":!1,width:"700px"},on:{"update:visible":function(t){e.showRefundType=t}}},[o("div",{staticClass:"changePayWay"},[o("el-radio-group",{model:{value:e.refundTypeId,callback:function(t){e.refundTypeId=t},expression:"refundTypeId"}},e._l(e.refundTypeList,function(t,i){return o("el-radio",{key:i,attrs:{label:t.outID}},[e._v(e._s(t.outName))])}),1)],1),o("el-form",{ref:"form",attrs:{"label-width":"80px"}},[o("el-form-item",{attrs:{label:"订单号:"}},[o("p",[e._v(e._s(e.orderId))])]),o("el-form-item",{attrs:{label:"退款金额:"}},[o("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",min:0,size:"small",disabled:e.isState},model:{value:e.depositNum,callback:function(t){e.depositNum=t},expression:"depositNum"}})],1)],1),o("div"),o("div",{directives:[{name:"show",rawName:"v-show",value:0==e.refundTypeId,expression:"refundTypeId == 0"}],staticClass:"cashPay"},[o("el-button",{attrs:{size:"small",type:"password"},on:{click:function(t){return t.stopPropagation(),e.handOverDeposit(t)}}},[e._v("确认已退款")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:1==e.refundTypeId,expression:"refundTypeId == 1"}],staticClass:"cashPay"},[o("el-button",{attrs:{size:"small",type:"password"},on:{click:function(t){return t.stopPropagation(),e.handOverDeposit(t)}}},[e._v("确认已退款")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:3==e.refundTypeId,expression:"refundTypeId == 3"}],staticClass:"cashPay"},[o("el-button",{attrs:{size:"small",type:"password"},on:{click:function(t){return t.stopPropagation(),e.handOverDeposit(t)}}},[e._v("确认已退款")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:4==e.refundTypeId,expression:"refundTypeId == 4"}],staticClass:"cashPay"},[o("el-button",{attrs:{size:"small",type:"password"},on:{click:function(t){return t.stopPropagation(),e.handOverDeposit(t)}}},[e._v("确认已退款")])],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){t.stopPropagation(),e.showRefundType=!1}}},[e._v("取 消")])],1)],1),e.showCancelTime?o("div",{staticClass:"distinguishIngWrap"},[o("div",{staticClass:"distinguishIng"},[o("strong",[e._v("身份证识别中...")]),o("span",[e._v(e._s(e.cancelTime)+"s未识别自动关闭")]),o("div",[o("a",{attrs:{href:"javascript:;"},on:{click:function(t){return t.stopPropagation(),e.closeTimerBtn(t)}}},[e._v("取消")])])])]):e._e(),o("audio",{ref:"messageAudio",attrs:{src:"http://hly.1000da.com.cn/audio/roomstatechange.mp3"}},[e._v("\n    您的浏览器不支持 audio 标签。\n  ")]),o("audio",{ref:"orderAudio",attrs:{src:"http://hly.1000da.com.cn/audio/ordervoice.mp3"}},[e._v("\n    您的浏览器不支持 audio 标签。\n  ")])],1)},n=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("strong",[e._v("栋"),o("span",[e._v("(总房数/空房数)")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("strong",[e._v("楼层"),o("span",[e._v("(总房数/空房数)")])])}],s=(o("28a5"),o("55dd"),o("795b")),r=o.n(s),a=(o("96cf"),o("3b8d")),l=(o("7f7f"),o("c5f6"),o("f499")),c=o.n(l),d=o("0a0d"),h=o.n(d),u=o("5880"),m=o("466f"),p=(o("cadf"),o("551c"),o("097d"),o("e1bf")),f={data:function(){return{cancelTime:30,cancelTimer:null,showCancelTime:!1}},created:function(){},methods:{closeCancelTimer:function(){var e=this;this.showCancelTime=!0,this.cancelTimer=setInterval(function(){e.cancelTime<1&&(clearInterval(e.cancelTimer),e.showCancelTime=!1,Object(p["a"])(),e.cancelTime=30),e.cancelTime--},1e3)},closeTimerBtn:function(){clearInterval(this.cancelTimer),this.showCancelTime=!1,Object(p["a"])(),this.cancelTime=30},getIdCardInfo:function(){var e=this;this.closeCancelTimer(),Object(p["b"])(3e4,function(t){if(200==Number(t.resultcode)){t=t.data;e.addOrderOptions.name=t.Name,e.addInRoomList[0].mainPersonInfo.name=t.Name,e.addOrderOptions.idcard=t.Id,e.addInRoomList[0].mainPersonInfo.idcard=t.Id,clearInterval(e.cancelTimer),e.cancelTime=30,e.showCancelTime=!1,Object(p["a"])()}else e.$notify({message:t.resultcontent,type:"error"}),clearInterval(e.cancelTimer),e.cancelTime=30,e.showCancelTime=!1,Object(p["a"])()})},getOtherIdCardInfo:function(e){var t=this;this.closeCancelTimer(),Object(p["b"])(3e4,function(o){if(200==Number(o.resultcode)){o=o.data;e.name=o.Name,e.idcard=o.Id,clearInterval(t.cancelTimer),t.showCancelTime=!1,t.cancelTime=30,Object(p["a"])()}else t.$notify({message:o.resultcontent,type:"error"}),clearInterval(t.cancelTimer),t.showCancelTime=!1,t.cancelTime=30,Object(p["a"])()})}},mounted:function(){}},v={computed:Object(u["mapGetters"])([]),mixins:[f],data:function(){var e=function(e,t,o){Object(m["d"])(t)?o():o(new Error("身份证格式有误!"))},t=function(e,t,o){Object(m["f"])(t)?o():o(new Error("电话号码有误!"))};return{rules:{name:[{required:!0,message:"请输入姓名",trigger:"change"}],idcard:[{validator:e,required:!0}],phone:[{validator:t,required:!0}]},rules0:{name:[{required:!0,message:"请输入姓名",trigger:"change"}],idcard:[{validator:e,trigger:"blur",required:!0}],phone:[{validator:t,trigger:"blur",required:!0}]},rules1:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],idcard:[{validator:e,trigger:"blur",required:!0}],phone:[{validator:t,trigger:"blur",required:!0}]},tungNum:"",pickerOptions:{disabledDate:function(e){return e.getTime()<h()()-864e5}},lungRadio:"1",floorRadio:"1",checked:!1,haveUserOperation:[{value:0,label:"在住信息"},{value:1,label:"远期房态"}],roomStateIndex:0,checkInType:[{value:0,label:"个人入住"},{value:1,label:"企业入住"}],hotelId:"",searchConditionObj:{},sourceList:[],conditionList:[],custFromList:[],hotelToungList:[],hotelConditionList:[],floorConditionList:[],floorConditionList2:[],floorCondition:[],options:{loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:"",roomState:[],custFrom:[],orderFrom:[],buildNo:[]},tungIndex:0,floorIndex:-1,floorLevel:-1,roomIndex:-1,userOrderInfo:{},longRoomStateList:[],continuedResidenceDialog:!1,dayNum:1,conFloor:"",conRoom:"",checkIndex:0,inOutDate:"",addOrderOptions:{loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",orderType:"",companyID:"",hotelID:"",carSeats:"",fromDate:"",endDate:"",cardNo:"",name:"",idcard:"",phone:"",specialNeed:"",roomInfoData:[]},orderType:[{value:0,label:"散客入住"},{value:1,label:"会员入住"},{value:2,label:"合作企业入住"}],showVIP:!1,showFillInInfo:!1,lockRoomDialog:!1,lockFloor:"",lockRoom:"",lockRemark:"",selectRoomDialog:!1,userInfo:{},dirtyOrClearnReason:"",showDirtyOrClearnReason:!1,updateDirtyRoomObj:{},updateDirtyRoomId:"",selectInRoomList:[],addInRoomList:[],outLineOrderObj:{},showHandOverDeposit:!1,payWayList:[],guestBillObj:{},showBillDetails:!1,depositNum:"",orderId:"",payWayId:0,companyList:[],showCompany:!1,isState:!1,vipPassword:"",enterpriseId:"",roomNum:"",refundTypeList:[],showRefundType:!1,refundTypeId:0,operType:0,Newloading:!1,isWebSocket:!1,MessageType:-1,lockId:-1,isWebsocketclose:!0}},beforeRouteLeave:function(e,t,o){this.isWebsocketclose=!1,this.websocketclose(),clearInterval(this.timer),o()},created:function(){var e=this,t=JSON.parse(sessionStorage.getItem("userInfo"));t&&(this.userInfo=t),sessionStorage.getItem("hotelID")?this.hotelId=sessionStorage.getItem("hotelID"):this.$router.push({name:"Login"}),this.options.hotelID=this.hotelId,this.initWebSocket(),this.initList().then(function(){e.initHotelPayWay().then(function(){e.$store.commit("hideLoading")})})},methods:{cancelInPeople:function(e){this.addInRoomList=this.addInRoomList.filter(function(t){return t.roomID!=e.roomID})},cancelInOtherPeople:function(e,t){e.otherPersonInfo=e.otherPersonInfo.filter(function(e,o){return o!=t})},initWebSocket:function(){this.Newloading=this.$loading({lock:!0,text:"正在连接服务器....",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var e="ws://140.143.87.152:6767/";this.websock=new WebSocket(e),this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(){this.Newloading.close();var e={action:"Login",UserName:this.userInfo.serviceName,SystemName:"酒店SASS",DataType:this.userInfo.CompanyID};this.websocketsend(c()(e))},websocketonerror:function(){this.initWebSocket()},websocketonmessage:function(e){var t=JSON.parse(e.data);if(200==Number(t.resultcode))console.log("自己链接服务器成功");else if(t&&t.NotifyMessage){var o=JSON.parse(t.NotifyMessage);switch(this.MessageType=Number(o.msgType),Number(o.msgType)){case 2:this.$refs.orderAudio&&this.$refs.orderAudio.play();break;case 3:this.$refs.messageAudio&&this.$refs.messageAudio.play();for(var i=0;i<this.hotelConditionList.length;i++)for(var n=0;n<this.hotelConditionList[i].LevelList.length;n++)for(var s=0;s<this.hotelConditionList[i].LevelList[n].RoomList.length;s++)this.hotelConditionList[i].LevelList[n].RoomList[s].ht_re_Id==o.ht_re_Id&&(this.hotelConditionList[i].LevelList[n].RoomList[s]=o);this.initSearchCondition().then(function(){});break;case 9:this.$refs.messageAudio&&this.$refs.messageAudio.play();for(var r=0;r<this.hotelConditionList.length;r++)for(var a=0;a<this.hotelConditionList[r].LevelList.length;a++)for(var l=0;l<this.hotelConditionList[r].LevelList[a].RoomList.length;l++)this.hotelConditionList[r].LevelList[a].RoomList[l].ht_re_Id==o.ht_re_Id&&(this.hotelConditionList[r].LevelList[a].RoomList[l]=o);this.initSearchCondition().then(function(){});break;case 10:this.$refs.messageAudio&&this.$refs.messageAudio.play();for(var c=0;c<this.hotelConditionList.length;c++)for(var d=0;d<this.hotelConditionList[c].LevelList.length;d++)for(var h=0;h<this.hotelConditionList[c].LevelList[d].RoomList.length;h++)this.hotelConditionList[c].LevelList[d].RoomList[h].ht_re_Id==o.ht_re_Id&&(this.hotelConditionList[c].LevelList[d].RoomList[h]=o);this.initSearchCondition().then(function(){});break;case 8:this.$refs.messageAudio&&this.$refs.messageAudio.play();for(var u=0;u<this.hotelConditionList.length;u++)for(var m=0;m<this.hotelConditionList[u].LevelList.length;m++)for(var p=0;p<this.hotelConditionList[u].LevelList[m].RoomList.length;p++)this.hotelConditionList[u].LevelList[m].RoomList[p].ht_re_Id==o.ht_re_Id&&(this.hotelConditionList[u].LevelList[m].RoomList[p]=o);this.initSearchCondition().then(function(){});break}}},websocketsend:function(e){this.websock.send(e)},websocketclose:function(e){var t=this;if(console.log("断开连接",e),this.isWebSocket)this.initWebSocket(),this.isWebSocket=!1;else if(this.isWebsocketclose){this.$loading({lock:!0,text:"正在连接服务器",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){console.log("5秒"),t.initWebSocket()},5e3)}},setMainPersonInfoName:function(){this.addInRoomList[0].mainPersonInfo.name=this.addOrderOptions.name},setMainPersonInfoIdcard:function(){this.addInRoomList[0].mainPersonInfo.idcard=this.addOrderOptions.idcard},setMainPersonInfoPhone:function(){this.addInRoomList[0].mainPersonInfo.phone=this.addOrderOptions.phone},clickWhite:function(){},initList:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.initSearchCondition();case 2:return e.next=4,this.initData();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),initSearchCondition:function(){var e=this;return new r.a(function(t,o){var i={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:e.hotelId};e.$store.dispatch("initSearchCondition",i).then(function(o){function i(e,t){return e.BuildNo-t.BuildNo}function n(e,t){return e.Level-t.Level}e.searchConditionObj=o,e.sourceList=o.bookWayList,e.conditionList=o.conditionList,e.custFromList=o.custFromList,o.hotelConditionList.sort(i),e.hotelToungList=o.hotelConditionList;for(var s=0;s<o.hotelConditionList.length;s++)o.hotelConditionList[s].LevelList.sort(n);e.floorCondition=o.hotelConditionList[0].LevelList,t()},function(t){e.$notify({message:t,type:"error"}),e.$store.commit("hideLoading")})})},initData:function(){var e=this;return this.$store.commit("showLoading"),new r.a(function(t,o){e.$store.dispatch("initCashierGuestRoom",e.options).then(function(o){function i(e,t){return e.BuildNo-t.BuildNo}function n(e,t){return e.Level-t.Level}o.sort(i);for(var s=0;s<o.length;s++)o[s].LevelList.sort(n);function r(e,t){return e.ht_re_RoomID-t.ht_re_RoomID}for(var a=0;a<o.length;a++)for(var l=0;l<o[a].LevelList.length;l++)o[a].LevelList[l].RoomList.sort(r);o[e.tungIndex]?(e.floorConditionList=o[e.tungIndex].LevelList,e.floorConditionList2=o[e.tungIndex].LevelList):(e.floorConditionList=[],e.floorConditionList2=[]),e.hotelConditionList=o,e.roomIndex=-1,t()},function(t){e.$notify({message:t,type:"error"}),e.roomIndex=-1,e.$store.commit("hideLoading")})})},changeRoom:function(e,t,o){this.roomStateIndex=0,this.conRoom=e.ht_re_RoomID,this.conFloor=o,this.tungNum=e.ht_re_BuildNo,this.roomNum=e.ht_re_RoomID,this.roomIndex=t,this.floorLevel=o,2!=e.ht_re_State&&3!=e.ht_re_State||this.initInRoomInfo(e.ht_re_BuildNo,o,e.ht_re_RoomID)},closeRoomOperation:function(){this.roomIndex=-1,this.floorLevel=-1,this.roomStateIndex=0},changeSourceList:function(){var e=this;this.initData().then(function(){e.$store.commit("hideLoading")})},changeTung:function(e,t){var o=this;this.floorIndex=-1,this.tungIndex=t,this.floorCondition=this.hotelToungList[t].LevelList,this.tungNum=e.BuildNo;var i=this.hotelConditionList.filter(function(t){return t.BuildNo==e.BuildNo});this.floorConditionList=this.floorConditionList2=i&&i.length?i[0].LevelList:[],this.closeRoomOperation(),this.initData().then(function(){o.$store.commit("hideLoading")})},changeFloor:function(e,t){this.floorIndex=t,this.closeRoomOperation(),this.floorConditionList=this.floorConditionList2.filter(function(t){return t.Level==e.Level})},changeRoomState:function(e,t,o){switch(this.roomStateIndex=t,t){case 0:this.initInRoomInfo(e.ht_re_BuildNo,o,e.ht_re_RoomID);break;case 1:this.initLongRoomState(e.ht_re_BuildNo,o,e.ht_re_RoomID);break;default:this.$notify({message:"该模块正在努力开发中",type:"error"})}},initInRoomInfo:function(e,t,o){var i=this,n={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:this.hotelId,buildNo:e,buildLevel:t,roomID:o};this.$store.commit("showLoading"),this.$store.dispatch("initHotelInRoomInfo",n).then(function(e){i.userOrderInfo=e.data,i.$store.commit("hideLoading")},function(e){i.$notify({message:e,type:"error"}),i.$store.commit("hideLoading")})},initLongRoomState:function(e,t,o){var i=this,n={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:this.hotelId,buildNo:e,buildLevel:t,roomID:o};this.$store.commit("showLoading"),this.$store.dispatch("initLongRoomState",n).then(function(e){for(var t=0;t<e.data.length;t++){var o=e.data[t].date.split("-");e.data[t].year=o[0],e.data[t].month=o[1],e.data[t].day=o[2]}i.longRoomStateList=e.data,i.$store.commit("hideLoading")},function(e){i.$notify({message:e,type:"error"}),i.$store.commit("hideLoading")})},continuedResidence:function(){this.showBillDetails=!1,this.continuedResidenceDialog=!0},continuedResidenceSubmit:function(){var e=this;if(this.dayNum<1)this.$notify({message:"最少续住一天",type:"error"});else{var t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:this.hotelId,buildNo:this.tungNum,buildLevel:this.conFloor,roomID:this.conRoom,goOnDay:this.dayNum};this.$store.commit("showLoading"),this.$store.dispatch("continuedResidence",t).then(function(t){e.$notify({message:t,type:"success"}),e.initSearchDeposit(),e.continuedResidenceDialog=!1},function(t){e.$notify({message:t,type:"error"}),e.continuedResidenceDialog=!1,e.$store.commit("hideLoading")})}},initUserOrder:function(e){var t=this,o={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:this.hotelId,buildNo:e.ht_re_BuildNo,buildLevel:e.ht_re_BuildLevel,roomID:e.ht_re_RoomID};this.$store.commit("showLoading"),this.$store.dispatch("initUserOrder",o).then(function(e){t.orderId=e.data.ht_or_OrderID,t.guestBillObj=e.data,t.showBillDetails=!0,t.$store.commit("hideLoading")},function(e){t.$notify({message:e,type:"error"}),t.$store.commit("hideLoading")})},changeOrderType:function(e){this.showVIP=1==e,2==e?(this.showCompany=!0,this.initCooperativeEnterprise()):this.showCompany=!1},selectDate:function(e){this.addOrderOptions.fromDate=e[0],this.addOrderOptions.endDate=e[1]},openCheckIn:function(e){var t=this;this.clearGuestData(),this.addOrderOptions.fromDate="",this.addOrderOptions.endDate="",this.inOutDate="",this.addInRoomList=[];var o={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:this.hotelId,buildNo:e.ht_re_BuildNo,buildLevel:e.ht_re_BuildLevel,roomID:e.ht_re_RoomID};this.$store.commit("showLoading"),this.$store.dispatch("searchRoomDate",o).then(function(o){0==o.ht_re_LockState&&0==o.ht_re_State&&(0==o.inCount||o.inCount<0)?(t.addInRoomList.push({buildNo:e.ht_re_BuildNo,levelNo:e.ht_re_BuildLevel,roomID:e.ht_re_RoomID,mainPersonInfo:{name:"",idcard:"",phone:""},otherPersonInfo:[]}),t.showFillInInfo=!0,t.getIdCardInfo()):(t.$notify({message:"该房间暂无法入住",type:"error"}),t.initList().then(function(){t.$store.commit("hideLoading")})),t.$store.commit("hideLoading")},function(e){t.$notify({message:e,type:"error"}),t.$store.commit("hideLoading")})},closeCheckIn:function(){this.showFillInInfo=!1},checkInSelectRoom:function(){var e=this,t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:this.hotelId,buildNo:[this.tungNum]};this.$store.commit("showLoading"),this.$store.dispatch("initCheckInSelectRoom",t).then(function(t){function o(e,t){return e.Level-t.Level}for(var i=0;i<t.length;i++)t[i].LevelList.sort(o);for(var n=0;n<t.length;n++)for(var s=0;s<t[n].LevelList.length;s++)t[n].LevelList[s].RoomList=t[n].LevelList[s].RoomList.filter(function(t){if(0==t.ht_re_State&&0==t.ht_re_NeedClean){t.isState=!1;for(var o=0;o<e.addInRoomList.length;o++)t.ht_re_RoomID==e.addInRoomList[o].roomID&&(t.isState=!0);return!0}return!1});e.selectInRoomList=t[0].LevelList,e.selectRoomDialog=!0,e.$store.commit("hideLoading")},function(t){e.$notify({message:t,type:"error"}),e.$store.commit("hideLoading")})},hotelLockRoom:function(e){e.ht_re_LockState?this.cancelLockRoom(e.ht_re_Id):(this.lockId=e.ht_re_Id,this.lockRoomDialog=!0)},hotelLockRoomConfirm:function(){var e=this,t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",operType:0,hotelID:this.hotelId,roomEntityID:this.lockId,remark:this.lockRemark};this.$store.commit("showLoading"),this.$store.dispatch("hotelLockRoomConfirm",t).then(function(t){e.$notify({message:t,type:"success"}),e.roomIndex=-1,e.$store.commit("hideLoading")},function(t){e.$notify({message:t,type:"error"}),e.$store.commit("hideLoading")}),this.lockRoomDialog=!1},cancelLockRoom:function(e){var t=this,o={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",operType:1,hotelID:this.hotelId,roomEntityID:e,remark:""};this.$store.commit("showLoading"),this.$store.dispatch("cancelHotelLockRoom",o).then(function(e){t.$notify({message:e,type:"success"}),t.roomIndex=-1,t.$store.commit("hideLoading")},function(e){t.$notify({message:e,type:"error"}),t.$store.commit("hideLoading")})},updateDirtyRoom:function(e,t){this.dirtyOrClearnReason="",this.updateDirtyRoomObj=e,this.updateDirtyRoomId=t,this.showDirtyOrClearnReason=!0},updateDirtyRoomSubmit:function(){var e=this,t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:this.hotelId,roomID:this.updateDirtyRoomObj.ht_re_Id,managerID:this.userInfo.Id,reason:this.dirtyOrClearnReason,operType:this.updateDirtyRoomId};this.$store.commit("showLoading"),this.$store.dispatch("updateDirtyRoom",t).then(function(t){e.$notify({message:t,type:"success"}),e.roomIndex=-1,e.initSearchCondition().then(function(){e.$store.commit("hideLoading")})},function(t){e.$notify({message:t,type:"error"}),e.$store.commit("hideLoading")}),this.showDirtyOrClearnReason=!1},roomOperationOver:function(e,t){var o=this,i={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",hotelID:this.hotelId,roomID:e.ht_re_Id,cleanerID:this.userInfo.Id,operType:t};this.$store.commit("showLoading"),this.$store.dispatch("roomOperationOver",i).then(function(e){o.$notify({message:e,type:"success"}),o.roomIndex=-1,o.initSearchCondition().then(function(){o.$store.commit("hideLoading")})},function(e){o.$notify({message:e,type:"error"}),o.$store.commit("hideLoading")})},changeInRoom:function(e,t){e.isState=!e.isState},checkInSelectRoomSumit:function(){for(var e=[],t=0;t<this.selectInRoomList.length;t++)for(var o=0;o<this.selectInRoomList[t].RoomList.length;o++)this.selectInRoomList[t].RoomList[o].isState&&e.push({buildNo:this.selectInRoomList[t].RoomList[o].innerBuild,levelNo:this.selectInRoomList[t].RoomList[o].innerLevel,roomID:this.selectInRoomList[t].RoomList[o].ht_re_RoomID,mainPersonInfo:{name:"",idcard:"",phone:""},otherPersonInfo:[]});for(var i=0;i<e.length;i++)for(var n=0;n<this.addInRoomList.length;n++)e[i].roomID==this.addInRoomList[n].roomID&&(e[i]=this.addInRoomList[n]);this.addInRoomList=e,this.selectRoomDialog=!1},addOtherPerson:function(e,t){e.otherPersonInfo.push({name:"",idcard:"",phone:""})},addOrderConfirm:function(){var e=this;if(this.inOutDate)if(""!==this.addOrderOptions.orderType)if(1!=this.addOrderOptions.orderType||this.addOrderOptions.cardNo.trim()){this.$refs.newRuleForm0.validate(function(t){if(!t)return e.$notify({message:"请输入必填项!",type:"error"}),!1;if(e.addInRoomList.length){for(var o=0;o<e.addInRoomList.length;o++){if(!e.addInRoomList[o].mainPersonInfo.name.trim())return void e.$notify({message:"请确保住户姓名都以填写完整",type:"error"});if(!Object(m["d"])(e.addInRoomList[o].mainPersonInfo.idcard.trim()))return void e.$notify({message:"请确保住户身份证号是否填写正确",type:"error"});if(!Object(m["f"])(e.addInRoomList[o].mainPersonInfo.phone.trim()))return void e.$notify({message:"请确保住户手机号是否填写正确",type:"error"});for(var i=0;i<e.addInRoomList[o].otherPersonInfo.length;i++){if(!e.addInRoomList[o].otherPersonInfo[i].name.trim())return void e.$notify({message:"请确保同来人姓名都以填写完整",type:"error"});if(!Object(m["d"])(e.addInRoomList[o].otherPersonInfo[i].idcard.trim()))return void e.$notify({message:"请确保同来人身份证号是否填写正确",type:"error"});if(!Object(m["f"])(e.addInRoomList[o].otherPersonInfo[i].phone.trim()))return void e.$notify({message:"请确保同来人手机号是否填写正确",type:"error"})}}e.addOrderOptions.operateUserID=e.userInfo.Id,e.addOrderOptions.hotelID=e.hotelId,e.addOrderOptions.roomInfoData=e.addInRoomList,e.$store.commit("showLoading"),e.$store.dispatch("outPlacingOrder",e.addOrderOptions).then(function(t){e.$notify({message:t.resultcontent,type:"success"}),e.initSearchCondition(),e.outLineOrderObj=t.data,e.orderId=t.data.ht_or_OrderID,e.initSearchDeposit()},function(t){e.$notify({message:t,type:"error"}),e.$store.commit("hideLoading")})}else e.$notify({message:"请选择入住房间",type:"warning"})})}else this.$notify({message:"请填写会员账号",type:"error"});else this.$notify({message:"请选择入住类型",type:"error"});else this.$notify({message:"请选择入离日期",type:"error"})},initSearchDeposit:function(){var e=this;this.isState=!1;var t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",orderID:this.orderId};this.$store.commit("showLoading"),this.$store.dispatch("initSearchDeposit",t).then(function(t){e.depositNum=t,e.showFillInInfo=!1,e.showBillDetails=!1,e.showHandOverDeposit=!0,e.$store.commit("hideLoading")},function(t){e.$notify({message:t,type:"error"}),e.$store.commit("hideLoading")})},clearGuestData:function(){this.addOrderOptions.orderType="",this.addOrderOptions.companyID="",this.addOrderOptions.hotelID="",this.addOrderOptions.carSeats="",this.addOrderOptions.cardNo="",this.addOrderOptions.name="",this.addOrderOptions.idcard="",this.addOrderOptions.phone="",this.addOrderOptions.specialNeed="",this.showVIP=!1,this.showCompany=!1},handOverDeposit:function(){var e=this;if(this.isState){this.payWayId=this.refundTypeId;var t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:this.userInfo.Id,operateUserName:"",pcName:"",hotelID:this.hotelId,buildNo:this.tungNum,buildLevel:this.floorLevel,roomID:this.roomNum,payWay:this.payWayId,payMoney:this.depositNum,operType:this.operType,memPassword:this.vipPassword,unidId:this.enterpriseId};this.$store.commit("showLoading"),this.$store.dispatch("hotelCheckOut",t).then(function(t){e.$notify({message:t,type:"success"}),e.showHandOverDeposit=!1,e.showRefundType=!1,e.initSearchCondition().then(function(){e.$store.commit("hideLoading")})},function(t){e.$notify({message:t,type:"error"}),e.$store.commit("hideLoading")})}else{var o={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",orderID:this.orderId,payWay:this.payWayId,payMoney:this.depositNum,memPassword:this.vipPassword};this.$store.commit("showLoading"),this.$store.dispatch("handOverDeposit",o).then(function(t){e.$notify({message:t,type:"success"}),e.showHandOverDeposit=!1,e.roomIndex=-1,e.$store.commit("hideLoading")},function(t){e.$notify({message:t,type:"error"}),e.$store.commit("hideLoading")})}},initHotelPayWay:function(){var e=this;return new r.a(function(t,o){var i={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:""};e.$store.commit("showLoading"),e.$store.dispatch("initHotelPayWay",i).then(function(o){e.payWayList=o,t()})})},initCooperativeEnterprise:function(){var e=this,t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",ht_ui_HotelID:this.hotelId,ht_ui_UserState:0,ht_ui_State:1};this.$store.commit("showLoading"),this.$store.dispatch("initCooperativeEnterprise",t).then(function(t){e.companyList=t,e.$store.commit("hideLoading")},function(t){e.$notify({message:t,type:"error"}),e.$store.commit("hideLoading")})},settleAccounts:function(){var e=this;this.payWayId=0,this.vipPassword="",this.isState=!0;var t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",orderID:this.orderId};this.$store.commit("showLoading"),this.$store.dispatch("hotelSettleAccounts",t).then(function(t){t>=0&&(e.operType=0,e.showBillDetails=!1,e.showHandOverDeposit=!0,e.depositNum=t),0==t&&e.$notify({message:"无需退款以及补款",type:"warning"}),t<0&&(e.operType=1,e.showBillDetails=!1,e.depositNum=t,e.guestBillObj.ht_or_OrderType>1?(e.operType=0,e.showHandOverDeposit=!0):e.initRefundType()),e.$store.commit("hideLoading")},function(t){e.$notify({message:t,type:"error"}),e.$store.commit("hideLoading")})},initRefundType:function(){var e=this,t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:""};this.$store.commit("showLoading"),this.$store.dispatch("initRefundType",t).then(function(t){e.refundTypeList=t,e.showRefundType=!0,e.$store.commit("hideLoading")},function(t){e.$notify({message:t,type:"error"}),e.$store.commit("hideLoading")})},cancelOrder:function(){var e=this,t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",orderNo:this.orderId};this.$store.commit("showLoading"),this.$store.dispatch("hotelCancelOrder",t).then(function(t){e.$notify({message:t,type:"success"}),e.showBillDetails=!1,e.roomIndex=-1,e.initSearchCondition().then(function(){e.$store.commit("hideLoading")})},function(t){e.$notify({message:t,type:"error"}),e.$store.commit("hideLoading")})}},mounted:function(){var e=this;this.$nextTick(function(){e.timer=setInterval(function(){e.websock&&e.websocketsend("来了")},6e4)}),document.addEventListener("click",function(t){e.roomIndex=-1})}},_=v,g=(o("8de3"),o("2877")),y=Object(g["a"])(_,i,n,!1,null,"e52fb3bc",null);t["default"]=y.exports},e829:function(e,t,o){o("2f37"),e.exports=o("584a").Date.now}}]);